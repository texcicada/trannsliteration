\newcommand\avtag{{\tiny [Avestan]\par}}

\ExplSyntaxOn

%\transrev: common code

%-----   Unicode codepoint
\newcommand\doavtransuc{%
%
\regex_replace_all:nnN { U\+10B00 } { \cB\{ \c{avfont}𐬀 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B01 } { \cB\{ \c{avfont}𐬁 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B02 } { \cB\{ \c{avfont}𐬂 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B03 } { \cB\{ \c{avfont}𐬃 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B04 } { \cB\{ \c{avfont}𐬄 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B05 } { \cB\{ \c{avfont}𐬅 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B06 } { \cB\{ \c{avfont}𐬆 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B07 } { \cB\{ \c{avfont}𐬇 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B08 } { \cB\{ \c{avfont}𐬈 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B09 } { \cB\{ \c{avfont}𐬉 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B0A } { \cB\{ \c{avfont}𐬊 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B0B } { \cB\{ \c{avfont}𐬋 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B0C } { \cB\{ \c{avfont}𐬌 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B0D } { \cB\{ \c{avfont}𐬍 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B0E } { \cB\{ \c{avfont}𐬎 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B0F } { \cB\{ \c{avfont}𐬏 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B10 } { \cB\{ \c{avfont}𐬐 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B11 } { \cB\{ \c{avfont}𐬑 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B12 } { \cB\{ \c{avfont}𐬒 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B13 } { \cB\{ \c{avfont}𐬓 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B14 } { \cB\{ \c{avfont}𐬔 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B15 } { \cB\{ \c{avfont}𐬕 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B16 } { \cB\{ \c{avfont}𐬖 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B17 } { \cB\{ \c{avfont}𐬗 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B18 } { \cB\{ \c{avfont}𐬘 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B19 } { \cB\{ \c{avfont}𐬙 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B1A } { \cB\{ \c{avfont}𐬚 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B1B } { \cB\{ \c{avfont}𐬛 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B1C } { \cB\{ \c{avfont}𐬜 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B1D } { \cB\{ \c{avfont}𐬝 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B1E } { \cB\{ \c{avfont}𐬞 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B1F } { \cB\{ \c{avfont}𐬟 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B20 } { \cB\{ \c{avfont}𐬠 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B21 } { \cB\{ \c{avfont}𐬡 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B22 } { \cB\{ \c{avfont}𐬢 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B23 } { \cB\{ \c{avfont}𐬣 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B24 } { \cB\{ \c{avfont}𐬤 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B25 } { \cB\{ \c{avfont}𐬥 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B26 } { \cB\{ \c{avfont}𐬦 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B27 } { \cB\{ \c{avfont}𐬧 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B28 } { \cB\{ \c{avfont}𐬨 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B29 } { \cB\{ \c{avfont}𐬩 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B2A } { \cB\{ \c{avfont}𐬪 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B2B } { \cB\{ \c{avfont}𐬫 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B2C } { \cB\{ \c{avfont}𐬬 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B2D } { \cB\{ \c{avfont}𐬭 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B2E } { \cB\{ \c{avfont}𐬮 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B2F } { \cB\{ \c{avfont}𐬯 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B30 } { \cB\{ \c{avfont}𐬰 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B31 } { \cB\{ \c{avfont}𐬱 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B32 } { \cB\{ \c{avfont}𐬲 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B33 } { \cB\{ \c{avfont}𐬳 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B34 } { \cB\{ \c{avfont}𐬴 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B35 } { \cB\{ \c{avfont}𐬵 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B39 } { \cB\{ \c{avfont}𐬹 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B3A } { \cB\{ \c{avfont}𐬺 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B3B } { \cB\{ \c{avfont}𐬻 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B3C } { \cB\{ \c{avfont}𐬼 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B3D } { \cB\{ \c{avfont}𐬽 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B3E } { \cB\{ \c{avfont}𐬾 \cE\}  } \l_myuc_tl
\regex_replace_all:nnN { U\+10B3F } { \cB\{ \c{avfont}𐬿 \cE\}  } \l_myuc_tl
}


%-----   Unicode name
\newcommand\doavtransun{%
%
\regex_replace_all:nnN { abbreviationmark } { \cB\{ \c{avfont}𐬹 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ngye } { \cB\{ \c{avfont}𐬣 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ngve } { \cB\{ \c{avfont}𐬤 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { shye } { \cB\{ \c{avfont}𐬳 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { sshe } { \cB\{ \c{avfont}𐬴 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { aao } { \cB\{ \c{avfont}𐬃 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { aan } { \cB\{ \c{avfont}𐬅 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { aee } { \cB\{ \c{avfont}𐬇 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { xye } { \cB\{ \c{avfont}𐬒 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { xve } { \cB\{ \c{avfont}𐬓 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { gge } { \cB\{ \c{avfont}𐬕 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ghe } { \cB\{ \c{avfont}𐬖 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { the } { \cB\{ \c{avfont}𐬚 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { dhe } { \cB\{ \c{avfont}𐬜 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { tte } { \cB\{ \c{avfont}𐬝 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { bhe } { \cB\{ \c{avfont}𐬡 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { nge } { \cB\{ \c{avfont}𐬢 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { nye } { \cB\{ \c{avfont}𐬦 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { nne } { \cB\{ \c{avfont}𐬧 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { hme } { \cB\{ \c{avfont}𐬩 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { yye } { \cB\{ \c{avfont}𐬪 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { she } { \cB\{ \c{avfont}𐬱 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { zhe } { \cB\{ \c{avfont}𐬲 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { aa } { \cB\{ \c{avfont}𐬁 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ao } { \cB\{ \c{avfont}𐬂 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { an } { \cB\{ \c{avfont}𐬄 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ae } { \cB\{ \c{avfont}𐬆 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ee } { \cB\{ \c{avfont}𐬉 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { oo } { \cB\{ \c{avfont}𐬋 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ii } { \cB\{ \c{avfont}𐬍 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { uu } { \cB\{ \c{avfont}𐬏 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ke } { \cB\{ \c{avfont}𐬐 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { xe } { \cB\{ \c{avfont}𐬑 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ge } { \cB\{ \c{avfont}𐬔 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ce } { \cB\{ \c{avfont}𐬗 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { je } { \cB\{ \c{avfont}𐬘 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { te } { \cB\{ \c{avfont}𐬙 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { de } { \cB\{ \c{avfont}𐬛 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { pe } { \cB\{ \c{avfont}𐬞 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { fe } { \cB\{ \c{avfont}𐬟 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { be } { \cB\{ \c{avfont}𐬠 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ne } { \cB\{ \c{avfont}𐬥 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { me } { \cB\{ \c{avfont}𐬨 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ye } { \cB\{ \c{avfont}𐬫 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ve } { \cB\{ \c{avfont}𐬬 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { re } { \cB\{ \c{avfont}𐬭 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { le } { \cB\{ \c{avfont}𐬮 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { se } { \cB\{ \c{avfont}𐬯 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { ze } { \cB\{ \c{avfont}𐬰 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { he } { \cB\{ \c{avfont}𐬵 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { p1 } { \cB\{ \c{avfont}𐬺 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { p2 } { \cB\{ \c{avfont}𐬻 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { p3 } { \cB\{ \c{avfont}𐬼 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { p4 } { \cB\{ \c{avfont}𐬽 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { p5 } { \cB\{ \c{avfont}𐬾 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { p6 } { \cB\{ \c{avfont}𐬿 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { a } { \cB\{ \c{avfont}𐬀 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { e } { \cB\{ \c{avfont}𐬈 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { o } { \cB\{ \c{avfont}𐬊 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { i } { \cB\{ \c{avfont}𐬌 \cE\}  } \l_myun_tl
\regex_replace_all:nnN { u } { \cB\{ \c{avfont}𐬎 \cE\}  } \l_myun_tl
}

%-----   Typing shortcut
\newcommand\doavtransts{%
%
\regex_replace_all:nnN { ahh } { \cB\{ \c{avfont}𐬃 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { auu } { \cB\{ \c{avfont}𐬅 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ehh } { \cB\{ \c{avfont}𐬇 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ngj } { \cB\{ \c{avfont}𐬣 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ngw } { \cB\{ \c{avfont}𐬤 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { nny } { \cB\{ \c{avfont}𐬧 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ssh } { \cB\{ \c{avfont}𐬳 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { aa } { \cB\{ \c{avfont}𐬁 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ah } { \cB\{ \c{avfont}𐬂 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { au } { \cB\{ \c{avfont}𐬄 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { eh } { \cB\{ \c{avfont}𐬆 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ee } { \cB\{ \c{avfont}𐬉 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { oo } { \cB\{ \c{avfont}𐬋 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ii } { \cB\{ \c{avfont}𐬍 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { uu } { \cB\{ \c{avfont}𐬏 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { xx } { \cB\{ \c{avfont}𐬒 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { xv } { \cB\{ \c{avfont}𐬓 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { gg } { \cB\{ \c{avfont}𐬕 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { gh } { \cB\{ \c{avfont}𐬖 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { th } { \cB\{ \c{avfont}𐬚 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { dh } { \cB\{ \c{avfont}𐬜 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { tt } { \cB\{ \c{avfont}𐬝 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ng } { \cB\{ \c{avfont}𐬢 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ny } { \cB\{ \c{avfont}𐬦 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { mh } { \cB\{ \c{avfont}𐬩 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { yy } { \cB\{ \c{avfont}𐬪 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { sh } { \cB\{ \c{avfont}𐬱 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { zh } { \cB\{ \c{avfont}𐬲 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ss } { \cB\{ \c{avfont}𐬴 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { p1 } { \cB\{ \c{avfont}𐬺 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { p2 } { \cB\{ \c{avfont}𐬻 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { p3 } { \cB\{ \c{avfont}𐬼 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { p4 } { \cB\{ \c{avfont}𐬽 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { p5 } { \cB\{ \c{avfont}𐬾 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { p6 } { \cB\{ \c{avfont}𐬿 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { a } { \cB\{ \c{avfont}𐬀 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { e } { \cB\{ \c{avfont}𐬈 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { o } { \cB\{ \c{avfont}𐬊 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { i } { \cB\{ \c{avfont}𐬌 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { u } { \cB\{ \c{avfont}𐬎 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { k } { \cB\{ \c{avfont}𐬐 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { x } { \cB\{ \c{avfont}𐬑 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { g } { \cB\{ \c{avfont}𐬔 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { c } { \cB\{ \c{avfont}𐬗 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { j } { \cB\{ \c{avfont}𐬘 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { t } { \cB\{ \c{avfont}𐬙 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { d } { \cB\{ \c{avfont}𐬛 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { p } { \cB\{ \c{avfont}𐬞 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { f } { \cB\{ \c{avfont}𐬟 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { b } { \cB\{ \c{avfont}𐬠 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { w } { \cB\{ \c{avfont}𐬡 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { n } { \cB\{ \c{avfont}𐬥 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { m } { \cB\{ \c{avfont}𐬨 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { y } { \cB\{ \c{avfont}𐬫 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { v } { \cB\{ \c{avfont}𐬬 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { r } { \cB\{ \c{avfont}𐬭 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { l } { \cB\{ \c{avfont}𐬮 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { s } { \cB\{ \c{avfont}𐬯 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { z } { \cB\{ \c{avfont}𐬰 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { h } { \cB\{ \c{avfont}𐬵 \cE\}  } \l_myts_tl
\regex_replace_all:nnN { ' } { \cB\{ \c{avfont}𐬹 \cE\}  } \l_myts_tl
}


%-----   Scholarly transliteration
\newcommand\doavtranstsst{%
%
\regex_replace_all:nnN { ahh } { ā̊  } \l_myst_tl
\regex_replace_all:nnN { auu } { ą̇  } \l_myst_tl
\regex_replace_all:nnN { ehh } { ə̄  } \l_myst_tl
\regex_replace_all:nnN { ngj } { ŋ́  } \l_myst_tl
\regex_replace_all:nnN { ngw } { ŋᵛ  } \l_myst_tl
\regex_replace_all:nnN { nny } { ṇ  } \l_myst_tl
\regex_replace_all:nnN { ssh } { š́  } \l_myst_tl
\regex_replace_all:nnN { aa } { ā  } \l_myst_tl
\regex_replace_all:nnN { ah } { å  } \l_myst_tl
\regex_replace_all:nnN { au } { ą  } \l_myst_tl
\regex_replace_all:nnN { eh } { ə  } \l_myst_tl
\regex_replace_all:nnN { ee } { ē  } \l_myst_tl
\regex_replace_all:nnN { oo } { ō  } \l_myst_tl
\regex_replace_all:nnN { ii } { ī  } \l_myst_tl
\regex_replace_all:nnN { uu } { ū  } \l_myst_tl
\regex_replace_all:nnN { xx } { x́  } \l_myst_tl
\regex_replace_all:nnN { xv } { xᵛ  } \l_myst_tl
\regex_replace_all:nnN { gg } { ġ  } \l_myst_tl
\regex_replace_all:nnN { gh } { γ  } \l_myst_tl
\regex_replace_all:nnN { th } { ϑ  } \l_myst_tl
\regex_replace_all:nnN { dh } { δ  } \l_myst_tl
\regex_replace_all:nnN { tt } { t̰  } \l_myst_tl
\regex_replace_all:nnN { ng } { ŋ  } \l_myst_tl
\regex_replace_all:nnN { ny } { ń  } \l_myst_tl
\regex_replace_all:nnN { mh } { m̨  } \l_myst_tl
\regex_replace_all:nnN { yy } { ẏ  } \l_myst_tl
\regex_replace_all:nnN { sh } { š  } \l_myst_tl
\regex_replace_all:nnN { zh } { ž  } \l_myst_tl
\regex_replace_all:nnN { ss } { ṣ̌  } \l_myst_tl
\regex_replace_all:nnN { p1 } { p1  } \l_myst_tl
\regex_replace_all:nnN { p2 } { p2  } \l_myst_tl
\regex_replace_all:nnN { p3 } { p3  } \l_myst_tl
\regex_replace_all:nnN { p4 } { p4  } \l_myst_tl
\regex_replace_all:nnN { p5 } { p5  } \l_myst_tl
\regex_replace_all:nnN { p6 } { p6  } \l_myst_tl
\regex_replace_all:nnN { a } { a  } \l_myst_tl
\regex_replace_all:nnN { e } { e  } \l_myst_tl
\regex_replace_all:nnN { o } { o  } \l_myst_tl
\regex_replace_all:nnN { i } { i  } \l_myst_tl
\regex_replace_all:nnN { u } { u  } \l_myst_tl
\regex_replace_all:nnN { k } { k  } \l_myst_tl
\regex_replace_all:nnN { x } { x  } \l_myst_tl
\regex_replace_all:nnN { g } { g  } \l_myst_tl
\regex_replace_all:nnN { c } { c  } \l_myst_tl
\regex_replace_all:nnN { j } { j  } \l_myst_tl
\regex_replace_all:nnN { t } { t  } \l_myst_tl
\regex_replace_all:nnN { d } { d  } \l_myst_tl
\regex_replace_all:nnN { p } { p  } \l_myst_tl
\regex_replace_all:nnN { f } { f  } \l_myst_tl
\regex_replace_all:nnN { b } { b  } \l_myst_tl
\regex_replace_all:nnN { w } { β  } \l_myst_tl
\regex_replace_all:nnN { n } { n  } \l_myst_tl
\regex_replace_all:nnN { m } { m  } \l_myst_tl
\regex_replace_all:nnN { y } { y  } \l_myst_tl
\regex_replace_all:nnN { v } { v  } \l_myst_tl
\regex_replace_all:nnN { r } { r  } \l_myst_tl
\regex_replace_all:nnN { l } { l  } \l_myst_tl
\regex_replace_all:nnN { s } { s  } \l_myst_tl
\regex_replace_all:nnN { z } { z  } \l_myst_tl
\regex_replace_all:nnN { h } { h  } \l_myst_tl
\regex_replace_all:nnN { ' } { '  } \l_myst_tl
}



%-----   Ruby Part 2a
\newcommand\doavtranstsruby{%
\regex_replace_all:nnN {ahh} { 蝌 } \l_myy_tl
\regex_replace_all:nnN {auu} { 蝎 } \l_myy_tl
\regex_replace_all:nnN {ehh} { 蝐 } \l_myy_tl
\regex_replace_all:nnN {ngj} { 蝬 } \l_myy_tl
\regex_replace_all:nnN {ngw} { 蝭 } \l_myy_tl
\regex_replace_all:nnN {nny} { 蝰 } \l_myy_tl
\regex_replace_all:nnN {ssh} { 蝼 } \l_myy_tl
\regex_replace_all:nnN {aa} { 蝊 } \l_myy_tl
\regex_replace_all:nnN {ah} { 蝋 } \l_myy_tl
\regex_replace_all:nnN {au} { 蝍 } \l_myy_tl
\regex_replace_all:nnN {eh} { 蝏 } \l_myy_tl
\regex_replace_all:nnN {ee} { 蝒 } \l_myy_tl
\regex_replace_all:nnN {oo} { 蝔 } \l_myy_tl
\regex_replace_all:nnN {ii} { 蝖 } \l_myy_tl
\regex_replace_all:nnN {uu} { 蝘 } \l_myy_tl
\regex_replace_all:nnN {xx} { 蝛 } \l_myy_tl
\regex_replace_all:nnN {xv} { 蝜 } \l_myy_tl
\regex_replace_all:nnN {gg} { 蝞 } \l_myy_tl
\regex_replace_all:nnN {gh} { 蝟 } \l_myy_tl
\regex_replace_all:nnN {th} { 蝣 } \l_myy_tl
\regex_replace_all:nnN {dh} { 蝥 } \l_myy_tl
\regex_replace_all:nnN {tt} { 蝦 } \l_myy_tl
\regex_replace_all:nnN {ng} { 蝫 } \l_myy_tl
\regex_replace_all:nnN {ny} { 蝯 } \l_myy_tl
\regex_replace_all:nnN {mh} { 蝲 } \l_myy_tl
\regex_replace_all:nnN {yy} { 蝳 } \l_myy_tl
\regex_replace_all:nnN {sh} { 蝺 } \l_myy_tl
\regex_replace_all:nnN {zh} { 蝻 } \l_myy_tl
\regex_replace_all:nnN {ss} { 蝽 } \l_myy_tl
\regex_replace_all:nnN {p1} { 螀 } \l_myy_tl
\regex_replace_all:nnN {p2} { 螁 } \l_myy_tl
\regex_replace_all:nnN {p3} { 螂 } \l_myy_tl
\regex_replace_all:nnN {p4} { 螃 } \l_myy_tl
\regex_replace_all:nnN {p5} { 螄 } \l_myy_tl
\regex_replace_all:nnN {p6} { 螅 } \l_myy_tl
\regex_replace_all:nnN {a} { 蝉 } \l_myy_tl
\regex_replace_all:nnN {e} { 蝑 } \l_myy_tl
\regex_replace_all:nnN {o} { 蝓 } \l_myy_tl
\regex_replace_all:nnN {i} { 蝕 } \l_myy_tl
\regex_replace_all:nnN {u} { 蝗 } \l_myy_tl
\regex_replace_all:nnN {k} { 蝙 } \l_myy_tl
\regex_replace_all:nnN {x} { 蝚 } \l_myy_tl
\regex_replace_all:nnN {g} { 蝝 } \l_myy_tl
\regex_replace_all:nnN {c} { 蝠 } \l_myy_tl
\regex_replace_all:nnN {j} { 蝡 } \l_myy_tl
\regex_replace_all:nnN {t} { 蝢 } \l_myy_tl
\regex_replace_all:nnN {d} { 蝤 } \l_myy_tl
\regex_replace_all:nnN {p} { 蝧 } \l_myy_tl
\regex_replace_all:nnN {f} { 蝨 } \l_myy_tl
\regex_replace_all:nnN {b} { 蝩 } \l_myy_tl
\regex_replace_all:nnN {w} { 蝪 } \l_myy_tl
\regex_replace_all:nnN {n} { 蝮 } \l_myy_tl
\regex_replace_all:nnN {m} { 蝱 } \l_myy_tl
\regex_replace_all:nnN {y} { 蝴 } \l_myy_tl
\regex_replace_all:nnN {v} { 蝵 } \l_myy_tl
\regex_replace_all:nnN {r} { 蝶 } \l_myy_tl
\regex_replace_all:nnN {l} { 蝷 } \l_myy_tl
\regex_replace_all:nnN {s} { 蝸 } \l_myy_tl
\regex_replace_all:nnN {z} { 蝹 } \l_myy_tl
\regex_replace_all:nnN {h} { 蝾 } \l_myy_tl
\regex_replace_all:nnN {'} { 蝿 } \l_myy_tl
%
		% put into a sequence, splitting by the delimiter		
		\exp_args:Nnno
							\seq_set_split:Nnn 
												\l_my_seq 
												{ } 
												{ \l_myy_tl }

		% reverse the sequence
		\seq_reverse:N 
							\l_my_seq 
							
			% remove the last (now first) (empty) item
%	\seq_pop_left:NNTF 
%					\l_my_seq 
%					\l_myy_tl 
%					{ } 
%					{ }

				% expand the sequence code, storing result in the TL
				\exp_args:Nne
										\tl_set:Nn 
															\l_myy_tl 
															{ \seq_use:Nn \l_my_seq { } }
															
					% now do the regex on the IDs					
\regex_replace_all:nnN {蝉} { \c{tablea}a\c{tableb} \cB\{ \c{avfont}𐬀\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝊} { \c{tablea}ā\c{tableb} \cB\{ \c{avfont}𐬁\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝋} { \c{tablea}å\c{tableb} \cB\{ \c{avfont}𐬂\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝌} { \c{tablea}ā̊\c{tableb} \cB\{ \c{avfont}𐬃\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝍} { \c{tablea}ą\c{tableb} \cB\{ \c{avfont}𐬄\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝎} { \c{tablea}ą̇\c{tableb} \cB\{ \c{avfont}𐬅\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝏} { \c{tablea}ə\c{tableb} \cB\{ \c{avfont}𐬆\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝐} { \c{tablea}ə̄\c{tableb} \cB\{ \c{avfont}𐬇\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝑} { \c{tablea}e\c{tableb} \cB\{ \c{avfont}𐬈\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝒} { \c{tablea}ē\c{tableb} \cB\{ \c{avfont}𐬉\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝓} { \c{tablea}o\c{tableb} \cB\{ \c{avfont}𐬊\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝔} { \c{tablea}ō\c{tableb} \cB\{ \c{avfont}𐬋\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝕} { \c{tablea}i\c{tableb} \cB\{ \c{avfont}𐬌\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝖} { \c{tablea}ī\c{tableb} \cB\{ \c{avfont}𐬍\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝗} { \c{tablea}u\c{tableb} \cB\{ \c{avfont}𐬎\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝘} { \c{tablea}ū\c{tableb} \cB\{ \c{avfont}𐬏\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝙} { \c{tablea}k\c{tableb} \cB\{ \c{avfont}𐬐\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝚} { \c{tablea}x\c{tableb} \cB\{ \c{avfont}𐬑\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝛} { \c{tablea}x́\c{tableb} \cB\{ \c{avfont}𐬒\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝜} { \c{tablea}xᵛ\c{tableb} \cB\{ \c{avfont}𐬓\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝝} { \c{tablea}g\c{tableb} \cB\{ \c{avfont}𐬔\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝞} { \c{tablea}ġ\c{tableb} \cB\{ \c{avfont}𐬕\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝟} { \c{tablea}γ\c{tableb} \cB\{ \c{avfont}𐬖\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝠} { \c{tablea}c\c{tableb} \cB\{ \c{avfont}𐬗\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝡} { \c{tablea}j\c{tableb} \cB\{ \c{avfont}𐬘\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝢} { \c{tablea}t\c{tableb} \cB\{ \c{avfont}𐬙\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝣} { \c{tablea}ϑ\c{tableb} \cB\{ \c{avfont}𐬚\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝤} { \c{tablea}d\c{tableb} \cB\{ \c{avfont}𐬛\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝥} { \c{tablea}δ\c{tableb} \cB\{ \c{avfont}𐬜\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝦} { \c{tablea}t̰\c{tableb} \cB\{ \c{avfont}𐬝\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝧} { \c{tablea}p\c{tableb} \cB\{ \c{avfont}𐬞\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝨} { \c{tablea}f\c{tableb} \cB\{ \c{avfont}𐬟\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝩} { \c{tablea}b\c{tableb} \cB\{ \c{avfont}𐬠\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝪} { \c{tablea}β\c{tableb} \cB\{ \c{avfont}𐬡\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝫} { \c{tablea}ŋ\c{tableb} \cB\{ \c{avfont}𐬢\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝬} { \c{tablea}ŋ́\c{tableb} \cB\{ \c{avfont}𐬣\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝭} { \c{tablea}ŋᵛ\c{tableb} \cB\{ \c{avfont}𐬤\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝮} { \c{tablea}n\c{tableb} \cB\{ \c{avfont}𐬥\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝯} { \c{tablea}ń\c{tableb} \cB\{ \c{avfont}𐬦\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝰} { \c{tablea}ṇ\c{tableb} \cB\{ \c{avfont}𐬧\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝱} { \c{tablea}m\c{tableb} \cB\{ \c{avfont}𐬨\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝲} { \c{tablea}m̨\c{tableb} \cB\{ \c{avfont}𐬩\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝳} { \c{tablea}ẏ\c{tableb} \cB\{ \c{avfont}𐬪\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝴} { \c{tablea}y\c{tableb} \cB\{ \c{avfont}𐬫\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝵} { \c{tablea}v\c{tableb} \cB\{ \c{avfont}𐬬\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝶} { \c{tablea}r\c{tableb} \cB\{ \c{avfont}𐬭\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝷} { \c{tablea}l\c{tableb} \cB\{ \c{avfont}𐬮\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝸} { \c{tablea}s\c{tableb} \cB\{ \c{avfont}𐬯\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝹} { \c{tablea}z\c{tableb} \cB\{ \c{avfont}𐬰\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝺} { \c{tablea}š\c{tableb} \cB\{ \c{avfont}𐬱\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝻} { \c{tablea}ž\c{tableb} \cB\{ \c{avfont}𐬲\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝼} { \c{tablea}š́\c{tableb} \cB\{ \c{avfont}𐬳\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝽} { \c{tablea}ṣ̌\c{tableb} \cB\{ \c{avfont}𐬴\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝾} { \c{tablea}h\c{tableb} \cB\{ \c{avfont}𐬵\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {蝿} { \c{tablea}'\c{tableb} \cB\{ \c{avfont}𐬹\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {螀} { \c{tablea}p1\c{tableb} \cB\{ \c{avfont}𐬺\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {螁} { \c{tablea}p2\c{tableb} \cB\{ \c{avfont}𐬻\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {螂} { \c{tablea}p3\c{tableb} \cB\{ \c{avfont}𐬼\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {螃} { \c{tablea}p4\c{tableb} \cB\{ \c{avfont}𐬽\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {螄} { \c{tablea}p5\c{tableb} \cB\{ \c{avfont}𐬾\cE\} \c{tablec} } \l_myy_tl
\regex_replace_all:nnN {螅} { \c{tablea}p6\c{tableb} \cB\{ \c{avfont}𐬿\cE\} \c{tablec} } \l_myy_tl
}


\newcommand\doavword{%
\doavtransts
\regex_replace_all:nnN { \. } {  } \l_myts_tl
 \tl_use:N \l_myts_tl  \ ( 

				\exp_args:No 
										\avtranstsst
										{ \l_myb_tl }
				 )
}


\newcommand\doavwordrev{%
%\doavtransts
\exp_args:No \avruby { \l_myts_tl }
%\regex_replace_all:nnN { \. } {  } \l_myts_tl
% \tl_use:N \l_myts_tl  
 $\leftarrow$
 \ ( 

				\exp_args:No 
										\avtranstsst
										{ \l_myb_tl }
				 )
}



\newcommand\doavgloss[1]{%
\doavtransts
\regex_replace_all:nnN { \. } {  } \l_myts_tl
\tl_use:N \l_myts_tl  \ ( 

				\exp_args:No 
										\avtranstsst
										{ \l_myb_tl }
			  , \ `#1'
				 )
}

\newcommand\doavglossrev[1]{%
\exp_args:No \avruby { \l_myts_tl }
%\doavtranstsrev
%\regex_replace_all:nnN { \. } {  } \l_myts_tl
%\tl_use:N \l_myts_tl 
 \ ( 

				\exp_args:No 
										\avtranstsst
										{ \l_myb_tl }
			  , \ `#1'
				 )
}









\NewDocumentCommand { \avuc } { m } {	\avtransuc {#1} }
\NewDocumentCommand { \avtransuc } { m } {%
\tl_set:Nn \l_myuc_tl { #1 }
 \doavtransuc 
 \transrev { \tl_use:N \l_myuc_tl }
}


\NewDocumentCommand { \avun } { m } {	\avtransun {#1} }
\NewDocumentCommand { \avtransun } { m } {%
\tl_set:Nn \l_myun_tl { #1 }
 \doavtransun 
 \exp_args:No 
										\transrev
										{ \l_myun_tl }
}

\NewDocumentCommand { \avts } { m } {	\avtransts {#1} }
\NewDocumentCommand { \avtransts } { m } {%
\tl_set:Nn \l_myts_tl { #1 }
 \doavtransts 
  \transrev { \tl_use:N \l_myts_tl  }
}


\NewDocumentCommand { \avst } { m } {	\avtranstsst {#1} }
\NewDocumentCommand { \avtranstsst } { m } {%
\tl_set:Nn \l_myst_tl { #1 }
 \doavtranstsst 
  \transrev { \tl_use:N \l_myst_tl  }
}

\NewDocumentCommand { \avruby } { m } {%
\tl_set:Nn \l_myy_tl { #1 }
%  \transrevonly { \tl_use:N \l_myy_tl  }
%  \tl_set:NN \l_myy_tl \l_myrev_tl
 \doavtranstsruby 
  \tl_use:N \l_myy_tl 
}

\NewDocumentCommand { \avw } { m } {%
\tl_set:Nn \l_myts_tl { #1 }
\tl_set:Nn \l_myb_tl { #1 }
 \doavword 
}

\NewDocumentCommand { \avwr } { m } {%
\tl_set:Nn \l_myts_tl { #1 }
\tl_set:Nn \l_myb_tl { #1 }
 \doavwordrev 
}


\NewDocumentCommand { \avgloss } { m m } {%
\tl_set:Nn \l_myts_tl { #1 }
\tl_set:Nn \l_myb_tl { #1 }
 \doavgloss {#2}
}

\NewDocumentCommand { \avglossr } { m m } {%
\tl_set:Nn \l_myts_tl { #1 }
\tl_set:Nn \l_myb_tl { #1 }
 \doavglossrev {#2}
}










%---- Environments
\NewDocumentEnvironment{avtransuce}{ +b } 
{
  \tl_set:Nn \l_myuc_tl { #1 }
	\doavtransuc
	\transrev { \tl_use:N \l_myuc_tl  }
}
{ }

\NewDocumentEnvironment{avtransune}{ +b } 
{
  \tl_set:Nn \l_myun_tl { #1 }
	\doavtransun
  \transrev { \tl_use:N \l_myun_tl  }
}
{ }

\NewDocumentEnvironment{avtranstse}{ +b } 
{
  \tl_set:Nn \l_myts_tl { #1 }
	\doavtransts
  \transrev { \tl_use:N \l_myts_tl }
}
{ }


\NewDocumentEnvironment{avtranstsste}{ +b } 
{
%  \tl_set:Nn \l_myug_tl { #1 }
	\doavtranstsst {#1}
%{ \ugfont \tl_use:N \l_myug_tl }
}
{ }


\NewDocumentEnvironment{avrubye}{ +b } 
{
%  \tl_set:Nn \l_myug_tl { #1 }
	\doavtranstsrubye {#1}
%{ \ugfont \tl_use:N \l_myug_tl }
}
{ }



\NewDocumentEnvironment{avtableture}{ +b } 
{
	\begin{quotation}
%	{\raggedright
%	\begin{tabular}{|l|}
%	\hline
%	\rowcolor{blue!5}
	\begin{avtranstse}
	#1
	\end{avtranstse} 			
%					\\
%	\rowcolor{red!5}
\par

\bigskip
	\begin{avtranstsste}
		#1
		\end{avtranstsste} 
%					\\
%	\hline
%	\end{tabular}
%		}
	\end{quotation}
}
{ }





%\RequirePackage{bidi}
\NewDocumentEnvironment{avestan}{ +b } 
{
	\begingroup
%%	\begin{otherlanguage}{hebrew}%babel
% \begin{RTL} %bidi command
	\pardir TRT \textdir TRT% kuatex
  \tl_set:Nn \l_myts_tl { #1 }
	\doavtransts
  \tl_use:N \l_myts_tl 
	\endgroup
% \end{RTL}%bidi command
%%	\end{otherlanguage}%babel
}
{ }



\ExplSyntaxOff




% Lists ====================================

\newcommand\avshowplainlistuc{%
%\subsection{List of Unicode codepoints}\label{sec:listavuc}
\noindent U+10B00 $\mapsto$ {\avfont 𐬀}\par
\noindent U+10B01 $\mapsto$ {\avfont 𐬁}\par
\noindent U+10B02 $\mapsto$ {\avfont 𐬂}\par
\noindent U+10B03 $\mapsto$ {\avfont 𐬃}\par
\noindent U+10B04 $\mapsto$ {\avfont 𐬄}\par
\noindent U+10B05 $\mapsto$ {\avfont 𐬅}\par
\noindent U+10B06 $\mapsto$ {\avfont 𐬆}\par
\noindent U+10B07 $\mapsto$ {\avfont 𐬇}\par
\noindent U+10B08 $\mapsto$ {\avfont 𐬈}\par
\noindent U+10B09 $\mapsto$ {\avfont 𐬉}\par
\noindent U+10B0A $\mapsto$ {\avfont 𐬊}\par
\noindent U+10B0B $\mapsto$ {\avfont 𐬋}\par
\noindent U+10B0C $\mapsto$ {\avfont 𐬌}\par
\noindent U+10B0D $\mapsto$ {\avfont 𐬍}\par
\noindent U+10B0E $\mapsto$ {\avfont 𐬎}\par
\noindent U+10B0F $\mapsto$ {\avfont 𐬏}\par
\noindent U+10B10 $\mapsto$ {\avfont 𐬐}\par
\noindent U+10B11 $\mapsto$ {\avfont 𐬑}\par
\noindent U+10B12 $\mapsto$ {\avfont 𐬒}\par
\noindent U+10B13 $\mapsto$ {\avfont 𐬓}\par
\noindent U+10B14 $\mapsto$ {\avfont 𐬔}\par
\noindent U+10B15 $\mapsto$ {\avfont 𐬕}\par
\noindent U+10B16 $\mapsto$ {\avfont 𐬖}\par
\noindent U+10B17 $\mapsto$ {\avfont 𐬗}\par
\noindent U+10B18 $\mapsto$ {\avfont 𐬘}\par
\noindent U+10B19 $\mapsto$ {\avfont 𐬙}\par
\noindent U+10B1A $\mapsto$ {\avfont 𐬚}\par
\noindent U+10B1B $\mapsto$ {\avfont 𐬛}\par
\noindent U+10B1C $\mapsto$ {\avfont 𐬜}\par
\noindent U+10B1D $\mapsto$ {\avfont 𐬝}\par
\noindent U+10B1E $\mapsto$ {\avfont 𐬞}\par
\noindent U+10B1F $\mapsto$ {\avfont 𐬟}\par
\noindent U+10B20 $\mapsto$ {\avfont 𐬠}\par
\noindent U+10B21 $\mapsto$ {\avfont 𐬡}\par
\noindent U+10B22 $\mapsto$ {\avfont 𐬢}\par
\noindent U+10B23 $\mapsto$ {\avfont 𐬣}\par
\noindent U+10B24 $\mapsto$ {\avfont 𐬤}\par
\noindent U+10B25 $\mapsto$ {\avfont 𐬥}\par
\noindent U+10B26 $\mapsto$ {\avfont 𐬦}\par
\noindent U+10B27 $\mapsto$ {\avfont 𐬧}\par
\noindent U+10B28 $\mapsto$ {\avfont 𐬨}\par
\noindent U+10B29 $\mapsto$ {\avfont 𐬩}\par
\noindent U+10B2A $\mapsto$ {\avfont 𐬪}\par
\noindent U+10B2B $\mapsto$ {\avfont 𐬫}\par
\noindent U+10B2C $\mapsto$ {\avfont 𐬬}\par
\noindent U+10B2D $\mapsto$ {\avfont 𐬭}\par
\noindent U+10B2E $\mapsto$ {\avfont 𐬮}\par
\noindent U+10B2F $\mapsto$ {\avfont 𐬯}\par
\noindent U+10B30 $\mapsto$ {\avfont 𐬰}\par
\noindent U+10B31 $\mapsto$ {\avfont 𐬱}\par
\noindent U+10B32 $\mapsto$ {\avfont 𐬲}\par
\noindent U+10B33 $\mapsto$ {\avfont 𐬳}\par
\noindent U+10B34 $\mapsto$ {\avfont 𐬴}\par
\noindent U+10B35 $\mapsto$ {\avfont 𐬵}\par
\noindent U+10B39 $\mapsto$ {\avfont 𐬹}\par
\noindent U+10B3A $\mapsto$ {\avfont 𐬺}\par
\noindent U+10B3B $\mapsto$ {\avfont 𐬻}\par
\noindent U+10B3C $\mapsto$ {\avfont 𐬼}\par
\noindent U+10B3D $\mapsto$ {\avfont 𐬽}\par
\noindent U+10B3E $\mapsto$ {\avfont 𐬾}\par
\noindent U+10B3F $\mapsto$ {\avfont 𐬿}\par
}



%-----   List of Unicode names
\newcommand\avshowplainlistun{%
%\subsection{List of Unicode names}\label{sec:listavun}
\noindent a $\mapsto$ {\avfont 𐬀}\par
\noindent aa $\mapsto$ {\avfont 𐬁}\par
\noindent ao $\mapsto$ {\avfont 𐬂}\par
\noindent aao $\mapsto$ {\avfont 𐬃}\par
\noindent an $\mapsto$ {\avfont 𐬄}\par
\noindent aan $\mapsto$ {\avfont 𐬅}\par
\noindent ae $\mapsto$ {\avfont 𐬆}\par
\noindent aee $\mapsto$ {\avfont 𐬇}\par
\noindent e $\mapsto$ {\avfont 𐬈}\par
\noindent ee $\mapsto$ {\avfont 𐬉}\par
\noindent o $\mapsto$ {\avfont 𐬊}\par
\noindent oo $\mapsto$ {\avfont 𐬋}\par
\noindent i $\mapsto$ {\avfont 𐬌}\par
\noindent ii $\mapsto$ {\avfont 𐬍}\par
\noindent u $\mapsto$ {\avfont 𐬎}\par
\noindent uu $\mapsto$ {\avfont 𐬏}\par
\noindent ke $\mapsto$ {\avfont 𐬐}\par
\noindent xe $\mapsto$ {\avfont 𐬑}\par
\noindent xye $\mapsto$ {\avfont 𐬒}\par
\noindent xve $\mapsto$ {\avfont 𐬓}\par
\noindent ge $\mapsto$ {\avfont 𐬔}\par
\noindent gge $\mapsto$ {\avfont 𐬕}\par
\noindent ghe $\mapsto$ {\avfont 𐬖}\par
\noindent ce $\mapsto$ {\avfont 𐬗}\par
\noindent je $\mapsto$ {\avfont 𐬘}\par
\noindent te $\mapsto$ {\avfont 𐬙}\par
\noindent the $\mapsto$ {\avfont 𐬚}\par
\noindent de $\mapsto$ {\avfont 𐬛}\par
\noindent dhe $\mapsto$ {\avfont 𐬜}\par
\noindent tte $\mapsto$ {\avfont 𐬝}\par
\noindent pe $\mapsto$ {\avfont 𐬞}\par
\noindent fe $\mapsto$ {\avfont 𐬟}\par
\noindent be $\mapsto$ {\avfont 𐬠}\par
\noindent bhe $\mapsto$ {\avfont 𐬡}\par
\noindent nge $\mapsto$ {\avfont 𐬢}\par
\noindent ngye $\mapsto$ {\avfont 𐬣}\par
\noindent ngve $\mapsto$ {\avfont 𐬤}\par
\noindent ne $\mapsto$ {\avfont 𐬥}\par
\noindent nye $\mapsto$ {\avfont 𐬦}\par
\noindent nne $\mapsto$ {\avfont 𐬧}\par
\noindent me $\mapsto$ {\avfont 𐬨}\par
\noindent hme $\mapsto$ {\avfont 𐬩}\par
\noindent yye $\mapsto$ {\avfont 𐬪}\par
\noindent ye $\mapsto$ {\avfont 𐬫}\par
\noindent ve $\mapsto$ {\avfont 𐬬}\par
\noindent re $\mapsto$ {\avfont 𐬭}\par
\noindent le $\mapsto$ {\avfont 𐬮}\par
\noindent se $\mapsto$ {\avfont 𐬯}\par
\noindent ze $\mapsto$ {\avfont 𐬰}\par
\noindent she $\mapsto$ {\avfont 𐬱}\par
\noindent zhe $\mapsto$ {\avfont 𐬲}\par
\noindent shye $\mapsto$ {\avfont 𐬳}\par
\noindent sshe $\mapsto$ {\avfont 𐬴}\par
\noindent he $\mapsto$ {\avfont 𐬵}\par
\noindent abbreviationmark $\mapsto$ {\avfont 𐬹}\par
\noindent p1 $\mapsto$ {\avfont 𐬺}\par
\noindent p2 $\mapsto$ {\avfont 𐬻}\par
\noindent p3 $\mapsto$ {\avfont 𐬼}\par
\noindent p4 $\mapsto$ {\avfont 𐬽}\par
\noindent p5 $\mapsto$ {\avfont 𐬾}\par
\noindent p6 $\mapsto$ {\avfont 𐬿}\par
}


%-----   List of Typing shortcuts
\newcommand\avshowplainlistts{%
%\subsection{List of Typing shortcuts}\label{sec:listavts}
\noindent a $\mapsto$ {\avfont 𐬀}\par
\noindent aa $\mapsto$ {\avfont 𐬁}\par
\noindent ah $\mapsto$ {\avfont 𐬂}\par
\noindent ahh $\mapsto$ {\avfont 𐬃}\par
\noindent au $\mapsto$ {\avfont 𐬄}\par
\noindent auu $\mapsto$ {\avfont 𐬅}\par
\noindent eh $\mapsto$ {\avfont 𐬆}\par
\noindent ehh $\mapsto$ {\avfont 𐬇}\par
\noindent e $\mapsto$ {\avfont 𐬈}\par
\noindent ee $\mapsto$ {\avfont 𐬉}\par
\noindent o $\mapsto$ {\avfont 𐬊}\par
\noindent oo $\mapsto$ {\avfont 𐬋}\par
\noindent i $\mapsto$ {\avfont 𐬌}\par
\noindent ii $\mapsto$ {\avfont 𐬍}\par
\noindent u $\mapsto$ {\avfont 𐬎}\par
\noindent uu $\mapsto$ {\avfont 𐬏}\par
\noindent k $\mapsto$ {\avfont 𐬐}\par
\noindent x $\mapsto$ {\avfont 𐬑}\par
\noindent xx $\mapsto$ {\avfont 𐬒}\par
\noindent xv $\mapsto$ {\avfont 𐬓}\par
\noindent g $\mapsto$ {\avfont 𐬔}\par
\noindent gg $\mapsto$ {\avfont 𐬕}\par
\noindent gh $\mapsto$ {\avfont 𐬖}\par
\noindent c $\mapsto$ {\avfont 𐬗}\par
\noindent j $\mapsto$ {\avfont 𐬘}\par
\noindent t $\mapsto$ {\avfont 𐬙}\par
\noindent th $\mapsto$ {\avfont 𐬚}\par
\noindent d $\mapsto$ {\avfont 𐬛}\par
\noindent dh $\mapsto$ {\avfont 𐬜}\par
\noindent tt $\mapsto$ {\avfont 𐬝}\par
\noindent p $\mapsto$ {\avfont 𐬞}\par
\noindent f $\mapsto$ {\avfont 𐬟}\par
\noindent b $\mapsto$ {\avfont 𐬠}\par
\noindent w $\mapsto$ {\avfont 𐬡}\par
\noindent ng $\mapsto$ {\avfont 𐬢}\par
\noindent ngj $\mapsto$ {\avfont 𐬣}\par
\noindent ngw $\mapsto$ {\avfont 𐬤}\par
\noindent n $\mapsto$ {\avfont 𐬥}\par
\noindent ny $\mapsto$ {\avfont 𐬦}\par
\noindent nny $\mapsto$ {\avfont 𐬧}\par
\noindent m $\mapsto$ {\avfont 𐬨}\par
\noindent mh $\mapsto$ {\avfont 𐬩}\par
\noindent yy $\mapsto$ {\avfont 𐬪}\par
\noindent y $\mapsto$ {\avfont 𐬫}\par
\noindent v $\mapsto$ {\avfont 𐬬}\par
\noindent r $\mapsto$ {\avfont 𐬭}\par
\noindent l $\mapsto$ {\avfont 𐬮}\par
\noindent s $\mapsto$ {\avfont 𐬯}\par
\noindent z $\mapsto$ {\avfont 𐬰}\par
\noindent sh $\mapsto$ {\avfont 𐬱}\par
\noindent zh $\mapsto$ {\avfont 𐬲}\par
\noindent ssh $\mapsto$ {\avfont 𐬳}\par
\noindent ss $\mapsto$ {\avfont 𐬴}\par
\noindent h $\mapsto$ {\avfont 𐬵}\par
\noindent ' $\mapsto$ {\avfont 𐬹}\par
\noindent p1 $\mapsto$ {\avfont 𐬺}\par
\noindent p2 $\mapsto$ {\avfont 𐬻}\par
\noindent p3 $\mapsto$ {\avfont 𐬼}\par
\noindent p4 $\mapsto$ {\avfont 𐬽}\par
\noindent p5 $\mapsto$ {\avfont 𐬾}\par
\noindent p6 $\mapsto$ {\avfont 𐬿}\par
}


%-----   List of Standard Transliterations
\newcommand\avshowplainlistst{%
%\subsection{List of Standard Transliterations}\label{sec:listavst}
\noindent a $\mapsto$ a\par
\noindent aa $\mapsto$ ā\par
\noindent ah $\mapsto$ å\par
\noindent ahh $\mapsto$ ā̊\par
\noindent au $\mapsto$ ą\par
\noindent auu $\mapsto$ ą̇\par
\noindent eh $\mapsto$ ə\par
\noindent ehh $\mapsto$ ə̄\par
\noindent e $\mapsto$ e\par
\noindent ee $\mapsto$ ē\par
\noindent o $\mapsto$ o\par
\noindent oo $\mapsto$ ō\par
\noindent i $\mapsto$ i\par
\noindent ii $\mapsto$ ī\par
\noindent u $\mapsto$ u\par
\noindent uu $\mapsto$ ū\par
\noindent k $\mapsto$ k\par
\noindent x $\mapsto$ x\par
\noindent xx $\mapsto$ x́\par
\noindent xv $\mapsto$ xᵛ\par
\noindent g $\mapsto$ g\par
\noindent gg $\mapsto$ ġ\par
\noindent gh $\mapsto$ γ\par
\noindent c $\mapsto$ c\par
\noindent j $\mapsto$ j\par
\noindent t $\mapsto$ t\par
\noindent th $\mapsto$ ϑ\par
\noindent d $\mapsto$ d\par
\noindent dh $\mapsto$ δ\par
\noindent tt $\mapsto$ t̰\par
\noindent p $\mapsto$ p\par
\noindent f $\mapsto$ f\par
\noindent b $\mapsto$ b\par
\noindent w $\mapsto$ β\par
\noindent ng $\mapsto$ ŋ\par
\noindent ngj $\mapsto$ ŋ́\par
\noindent ngw $\mapsto$ ŋᵛ\par
\noindent n $\mapsto$ n\par
\noindent ny $\mapsto$ ń\par
\noindent nny $\mapsto$ ṇ\par
\noindent m $\mapsto$ m\par
\noindent mh $\mapsto$ m̨\par
\noindent yy $\mapsto$ ẏ\par
\noindent y $\mapsto$ y\par
\noindent v $\mapsto$ v\par
\noindent r $\mapsto$ r\par
\noindent l $\mapsto$ l\par
\noindent s $\mapsto$ s\par
\noindent z $\mapsto$ z\par
\noindent sh $\mapsto$ š\par
\noindent zh $\mapsto$ ž\par
\noindent ssh $\mapsto$ š́\par
\noindent ss $\mapsto$ ṣ̌\par
\noindent h $\mapsto$ h\par
\noindent ' $\mapsto$ '\par
\noindent p1 $\mapsto$ p1\par
\noindent p2 $\mapsto$ p2\par
\noindent p3 $\mapsto$ p3\par
\noindent p4 $\mapsto$ p4\par
\noindent p5 $\mapsto$ p5\par
\noindent p6 $\mapsto$ p6\par
}





\newcommand\ava{\symbol{68352}}
\newcommand\avaa{\symbol{68353}}
\newcommand\avao{\symbol{68354}}
\newcommand\avaao{\symbol{68355}}
\newcommand\avan{\symbol{68356}}
\newcommand\avaan{\symbol{68357}}
\newcommand\avae{\symbol{68358}}
\newcommand\avaee{\symbol{68359}}
\newcommand\ave{\symbol{68360}}
\newcommand\avee{\symbol{68361}}
\newcommand\avo{\symbol{68362}}
\newcommand\avoo{\symbol{68363}}
\newcommand\avi{\symbol{68364}}
\newcommand\avii{\symbol{68365}}
\newcommand\avu{\symbol{68366}}
\newcommand\avuu{\symbol{68367}}
\newcommand\avke{\symbol{68368}}
\newcommand\avxe{\symbol{68369}}
\newcommand\avxye{\symbol{68370}}
\newcommand\avxve{\symbol{68371}}
\newcommand\avge{\symbol{68372}}
\newcommand\avgge{\symbol{68373}}
\newcommand\avghe{\symbol{68374}}
\newcommand\avce{\symbol{68375}}
\newcommand\avje{\symbol{68376}}
\newcommand\avte{\symbol{68377}}
\newcommand\avthe{\symbol{68378}}
\newcommand\avde{\symbol{68379}}
\newcommand\avdhe{\symbol{68380}}
\newcommand\avtte{\symbol{68381}}
\newcommand\avpe{\symbol{68382}}
\newcommand\avfe{\symbol{68383}}
\newcommand\avbe{\symbol{68384}}
\newcommand\avbhe{\symbol{68385}}
\newcommand\avnge{\symbol{68386}}
\newcommand\avngye{\symbol{68387}}
\newcommand\avngve{\symbol{68388}}
\newcommand\avne{\symbol{68389}}
\newcommand\avnye{\symbol{68390}}
\newcommand\avnne{\symbol{68391}}
\newcommand\avme{\symbol{68392}}
\newcommand\avhme{\symbol{68393}}
\newcommand\avyye{\symbol{68394}}
\newcommand\avye{\symbol{68395}}
\newcommand\avve{\symbol{68396}}
\newcommand\avre{\symbol{68397}}
\newcommand\avle{\symbol{68398}}
\newcommand\avse{\symbol{68399}}
\newcommand\avze{\symbol{68400}}
\newcommand\avshe{\symbol{68401}}
\newcommand\avzhe{\symbol{68402}}
\newcommand\avshye{\symbol{68403}}
\newcommand\avsshe{\symbol{68404}}
\newcommand\avhe{\symbol{68405}}
\newcommand\avabbreviationmark{\symbol{68409}}
\newcommand\avpi{\symbol{68410}}
\newcommand\avpii{\symbol{68411}}
\newcommand\avpiii{\symbol{68412}}
\newcommand\avpiv{\symbol{68413}}
\newcommand\avpv{\symbol{68414}}
\newcommand\avpvi{\symbol{68415}}

